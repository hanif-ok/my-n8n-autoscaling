## Autoscaling
COMPOSE_PROJECT_NAME=n8n-autoscaling
COMPOSE_FILE_PATH=/app/docker-compose.yml
GENERIC_TIMEZONE=America/New_York
MIN_REPLICAS=1
MAX_REPLICAS=5
SCALE_UP_QUEUE_THRESHOLD=5
SCALE_DOWN_QUEUE_THRESHOLD=1
POLLING_INTERVAL_SECONDS=10
COOLDOWN_PERIOD_SECONDS=10
POLL_INTERVAL_SECONDS=5
N8N_QUEUE_BULL_GRACEFULSHUTDOWNTIMEOUT=300
N8N_GRACEFUL_SHUTDOWN_TIMEOUT=300

## Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
QUEUE_NAME_PREFIX=bull
QUEUE_NAME=jobs
QUEUE_BULL_REDIS_HOST=redis
QUEUE_HEALTH_CHECK_ACTIVE=true

## Postgres
POSTGRES_HOST=postgres
POSTGRES_DB=n8n
POSTGRES_USER=postgres
POSTGRES_PASSWORD=YOURPASSWORD # Change this to a strong password
PGDATA=/var/lib/postgresql/data/pgdata
DB_TYPE=postgresdb

## N8N
N8N_HOST=n8n.domain.com # Change this
N8N_WEBHOOK=webhook.domain.com # Change this
N8N_WEBHOOK_URL=https://webhook.domain.com # Change this
WEBHOOK_URL=https://webhook.domain.com # Change this
N8N_EDITOR_BASE_URL=https://n8n.domain.com # Change this
N8N_PROTOCOL=https
N8N_PORT=5678
N8N_DIAGNOSTICS_ENABLED=false
N8N_USER_FOLDER=/n8n/main
N8N_SECURE_COOKIE=false
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false
N8N_ENCRYPTION_KEY=YOURKEY # 32 characters MAKE YOUR OWN KEY
N8N_USER_MANAGEMENT_JWT_SECRET=YOURKEY # Change this to a strong password
N8N_WORKER_SERVICE_NAME=n8n-worker
N8N_WORKER_RUNNER_SERVICE_NAME=n8n-worker-runner
EXECUTIONS_MODE=queue
OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true

## Task Runner config (n8n 2.0 - external mode)
# Task runners are now separate containers in n8n 2.0
# Each worker needs its own task runner sidecar
# Security settings are configured in n8n-task-runners.json
N8N_RUNNERS_ENABLED=true
N8N_RUNNERS_MODE=external
N8N_RUNNERS_BROKER_LISTEN_ADDRESS=0.0.0.0
N8N_RUNNERS_AUTH_TOKEN=YOURPASSWORD # Change this to a strong password
N8N_RUNNERS_TASK_BROKER_URI=http://n8n:5679
N8N_RUNNERS_MAX_CONCURRENCY=5
N8N_RUNNERS_AUTO_SHUTDOWN_TIMEOUT=15

## Code node external packages
# These are configured in n8n-task-runners.json (NODE_FUNCTION_ALLOW_EXTERNAL)
# Available packages: ajv, ajv-formats, puppeteer-core, moment
# Puppeteer is pre-configured with chromium in the task runner image

## Data limits
N8N_DATA_TABLES_MAX_SIZE_BYTES=1048576000  # 1GB in bytes, adjust as needed
N8N_BLOCK_ENV_ACCESS_IN_NODE=false

## Cloudflare Tunnel
CLOUDFLARE_TUNNEL_TOKEN=YOURTOKEN

## Tailscale (Optional)
TAILSCALE_IP=
# Change this to your Tailscale IP (find with: tailscale ip -4)
# This binds n8n and postgres ports to your Tailscale network only for secure private access

## Evolution API
# ⬇️ ‼️ FILL THIS IN ‼️
AUTHENTICATION_API_KEY=<sha256keyhere> 


# --- Evolution Database Config ---
# These variables tell Evolution to use the same Postgres DB as n8n
# It will connect to the 'n8n' database using the 'postgres' user
EVOLUTION_DB_NAME=evolution_db # <-- ADD THIS NEW VARIABLE
SERVER_URL=subdomain.domain.com
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
DATABASE_CONNECTION_URI=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${EVOLUTION_DB_NAME}?schema=public
DATABASE_CONNECTION_CLIENT_NAME=evolution_exchange
DATABASE_SAVE_DATA_INSTANCE=true
DATABASE_SAVE_DATA_NEW_MESSAGE=true
DATABASE_SAVE_MESSAGE_UPDATE=true
DATABASE_SAVE_DATA_CONTACTS=true
DATABASE_SAVE_DATA_CHATS=true
DATABASE_SAVE_DATA_LABELS=true
DATABASE_SAVE_DATA_HISTORIC=true
CONFIG_SESSION_PHONE_VERSION=2.3000.1025110696 
# --- Evolution Redis Config ---
# These variables tell Evolution to use the same Redis service as n8n
# It uses database /6 to keep its data separate from n8n's data
CACHE_REDIS_ENABLED=true
CACHE_REDIS_URI=redis://redis:6379/6
CACHE_REDIS_PREFIX_KEY=evolution
CACHE_REDIS_SAVE_INSTANCES=false
CACHE_LOCAL_ENABLED=false
